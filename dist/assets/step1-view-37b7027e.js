import{u as C,a as o,o as E,c as P,b as x,d as c,e as u,f as e,t as a,g as I,j as T,i as w}from"./index-cef1f5e4.js";const j={class:"poll step1"},q={class:"row block"},D=e("div",{class:"block-title"},[e("h1",null,"Шаг 1")],-1),F={key:0,class:"error row"},O={key:1,class:"error row"},R=T('<div class="row poll-row"><h3>Чему равно следующее выражение? 5!</h3></div><div class="row poll-row"><input type="radio" id="step1-120" name="step1" value="120"><label for="step1-120">120</label></div><div class="row poll-row"><input type="radio" id="step1-5" name="step1" value="5"><label for="step1-5">5</label></div>',3),A={__name:"step1-view",setup(U){const s=C(),i=o(""),p=o(""),d=o(!1);function m(t,l,r){d.value=t,i.value=l,p.value=r}const g=o(""),_=o(""),v=o(!1);function b(){v.value=!0,g.value=localStorage.getItem("error_name"),_.value=localStorage.getItem("error_message")}const V=localStorage.getItem("poll_id"),f=w.get_poll_url+V,S=localStorage.getItem("token"),h=localStorage.getItem("gift");function k(t,l,r,B,M){w.apiPutPollFunc(t,l,r,B,M).then(function(n){n[0]=="error"?m(!0,"Ошибка сети или сервера SIV003",n[1]):n[1].message=="Unauthenticated."&&m(!0,"Ошибка авторизации SIV004","Попробуйте ещё раз")})}function y(){localStorage.removeItem("error_name"),localStorage.removeItem("error_message");const t=document.querySelector('input[name="step1"]:checked').value;t=="120"&&(k(S,f,"step3","0000-00-00 00:00:00",h),localStorage.setItem("last_step","step3"),s.push({name:"step3"})),t=="5"&&(k(S,f,"step2","0000-00-00 00:00:00",h),localStorage.setItem("last_step","step2"),s.push({name:"step2"}))}function N(){localStorage.clear(),s.push({name:"sign-in"})}return E(()=>{P.checkToken(s)}),x(()=>{localStorage.getItem("error_name")!==null&&b()}),(t,l)=>(c(),u("div",j,[e("div",q,[D,d.value?(c(),u("div",F,[e("p",null,a(i.value),1),e("p",null,a(p.value),1)])):I("",!0),v.value?(c(),u("div",O,[e("p",null,a(g.value),1),e("p",null,a(_.value),1)])):I("",!0),R,e("div",{class:"row"},[e("button",{id:"step1-button",onClick:y},"Ответить")]),e("div",{class:"row"},[e("button",{id:"sign-out-button",onClick:N},"Выйти")])])]))}};export{A as default};
