import{u as v,r as b,a as u,o as S,c as V,b as w,d as s,e as l,f as e,t as a,g as x,F as B,h as I,i as p}from"./index-d9ef3172.js";const F={class:"poll admin"},L={class:"row block"},M=e("div",{class:"block-title"},[e("h1",null,"Админ Панель")],-1),N={key:0,class:"error row"},T=e("tr",null,[e("th",null,"Имя"),e("th",null,"Ответ")],-1),E={__name:"admin-view",setup(y){const i=v(),r=b([]);r.length=0;const d=u(""),_=u(""),c=u(!1);function f(){localStorage.clear(),i.push({name:"sign-in"})}function m(o,n,t){c.value=o,d.value=n,_.value=t}function h(o){c.value=!1;for(let n=0;n<8;n++)if(o[n].last_step=="step7"){const t={name:o[n].name,text:o[n].step_7};r.push(t)}}const g=p.get_poll_url;function k(o,n){p.apiGetPollFunc(o,n).then(function(t){t[0]=="error"?m(!0,"Ошибка сети или сервера SIV003",t[1]):t[1].message=="Unauthenticated."?m(!0,"Ошибка авторизации SIV004","Попробуйте ещё раз"):h(t[1].data)})}return S(()=>{V.checkToken(i)}),w(()=>{if(localStorage.getItem("name")=="admin"){const o=localStorage.getItem("token");k(o,g)}}),(o,n)=>(s(),l("div",F,[e("div",L,[M,c.value?(s(),l("div",N,[e("p",null,"Код ошибки: "+a(d.value),1),e("p",null,"Описание ошибки: "+a(_.value),1)])):x("",!0),e("table",null,[T,(s(!0),l(B,null,I(r,t=>(s(),l("tr",null,[e("td",null,a(t.name),1),e("td",null,a(t.text),1)]))),256))]),e("div",{class:"row"},[e("button",{id:"sign-out-button",onClick:f},"Выйти")])])]))}};export{E as default};
