import{u as y,a as p,o as V,c as B,d as g,e as v,f as e,t as f,g as H,j as N,i as h}from"./index-cef1f5e4.js";const x={class:"poll step4"},C={class:"row block"},T=e("div",{class:"block-title"},[e("h1",null,"Шаг 4")],-1),E=e("p",null,"1 минута на ответ",-1),M={key:0,class:"error row"},j=N('<div class="row poll-row"><h3>Как расшифровывается аббревиатура PHP?</h3></div><div class="row poll-row"><input type="radio" id="step4-1" name="step4" value="1"><label for="step4-1">Phenomenal Human Programmer</label></div><div class="row poll-row"><input type="radio" id="step4-2" name="step4" value="2"><label for="step4-2">PHP: Hypertext Preprocessor </label></div><div class="row poll-row"><input type="radio" id="step4-3" name="step4" value="3"><label for="step4-3">Никак, это просто 3 буквы без смысла</label></div>',4),F={__name:"step4-view",setup(q){const s=y(),u=p(""),d=p(""),m=p(!1);function S(t){return new Promise(o=>setTimeout(o,t))}function _(t,o,c){m.value=t,u.value=o,d.value=c}const k=localStorage.getItem("poll_id"),l=h.get_poll_url+k,a=localStorage.getItem("token"),r=localStorage.getItem("gift");function n(t,o,c,I,P){h.apiPutPollFunc(t,o,c,I,P).then(function(i){i[0]=="error"?_(!0,"Ошибка сети или сервера SIV003",i[1]):i[1].message=="Unauthenticated."&&_(!0,"Ошибка авторизации SIV004","Попробуйте ещё раз")})}function w(){document.querySelector('input[name="step4"]:checked').value=="2"?(n(a,l,"step6","0000-00-00 00:00:00",r),localStorage.setItem("last_step","step6"),s.push({name:"step6"})):(n(a,l,"step5","0000-00-00 00:00:00",r),localStorage.setItem("last_step","step5"),s.push({name:"step5"}))}S(6e4).then(()=>{localStorage.setItem("error_name","Время ответа на шаге 4 превысило 1 минуту."),localStorage.setItem("error_message","Поэтому вернулись на шаг 2."),n(a,l,"step2","0000-00-00 00:00:00",r),localStorage.setItem("last_step","step2"),s.push({name:"step2"})});function b(){localStorage.clear(),s.push({name:"sign-in"})}return V(()=>{B.checkToken(s)}),(t,o)=>(g(),v("div",x,[e("div",C,[T,E,m.value?(g(),v("div",M,[e("p",null,f(u.value),1),e("p",null,f(d.value),1)])):H("",!0),j,e("div",{class:"row"},[e("button",{id:"step4-button",onClick:w},"Ответить")]),e("div",{class:"row"},[e("button",{id:"sign-out-button",onClick:b},"Выйти")])])]))}};export{F as default};
